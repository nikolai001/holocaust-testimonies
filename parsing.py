import osfrom bs4 import BeautifulSoupimport pandastestimonyData = []files = os.listdir("raw-data")ignoredFiles = ['.DS_Store']for file in files:    try:        if not file in ignoredFiles:            text = open('raw-data/'+file, encoding="utf-8").read()            protocol = BeautifulSoup(text,features="lxml")            metaData = protocol.find("div",attrs={"style":"background-color:#b19d82; border:1px solid #433a2b; width:265px; margin-left:7px; padding:5px; margin-bottom:20px; float:left;"}).findAll("span")                        protocolId = ""            name = "null"            gender = "null"            birthPlace = "null"            birthDate = "null"            residence = "null"            occupation = "null"            concentration = "null"            camps = "null"                      for index, data in enumerate(metaData):                                fieldData = data.text.strip()                protocolId = protocol.find('h1').text.strip().split(' ')[-1]                if fieldData == "Name":                    name = metaData[index + 1].text.strip()                elif fieldData == "Gender":                    gender = metaData[index + 1].text.strip()                elif fieldData == "Place of birth":                    birthPlace = metaData[index + 1].text.strip()                elif fieldData == "Date of birth":                    birthDate = metaData[index + 1].text.strip()                elif fieldData == "Place of residence":                    residence = metaData[index + 1].text.strip()                elif fieldData == "Occupation":                    occupation = metaData[index + 1].text.strip()                elif fieldData == "Concentration":                    concentration = metaData[index + 1].text.strip()                elif fieldData == "Camps":                    camps = metaData[index + 1].text.strip()            testimonyData.append([protocolId,name,gender,birthPlace,birthDate,residence,occupation,concentration,camps])                        fileName = protocol.find('h1').text.strip().replace(' ','_').replace('.','_').replace('__','_')                        testimonyText = protocol.find('div', attrs={"id": "content"})                        removeStyle = "background-color:#b19d82; border:1px solid #433a2b; width:265px; margin-left:7px; padding:5px; margin-bottom:20px; float:left;"                        removeMetas = testimonyText.find_all('div', style=removeStyle)            for removeMeta in removeMetas:                removeMeta.extract()                        removeHeadlines = testimonyText.find_all('h1')            for removeHeadline in removeHeadlines:                removeHeadline.extract()                        removeSpans = testimonyText.find_all('span')            for removeSpan in removeSpans:                removeSpan.extract()                        print(testimonyText.text.strip())                        f = open('testimonies/'+fileName+'.txt','w',encoding="utf-8")            f.write(str(testimonyText.text.strip()))                except AttributeError:        print("Cannot parse page "+file)df = pandas.DataFrame(testimonyData,columns = ['protocol','name','gender','place_of_birth','date_of_birth','place_of_residence','occupation','concentration','camps'])df.set_index('protocol',drop=True,inplace=True)df.to_csv('testimonies.csv', index=True, encoding='utf-8')